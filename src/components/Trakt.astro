---
import traktData from "../data/trakt.json";

interface RatingItem {
  id: string;
  title: string;
  year: number;
  rating: number;
  director: string;
  directorId: number | null;
  href: string;
  poster: string;
}

const { 
  allRatings = [] as RatingItem[], 
  genres = [] as [string, number][], 
  directors = [] as [string, any][], 
  sparkline = [], 
  username = "ewelker" 
} = traktData || {};

const tens = allRatings.filter(r => r.rating === 10);
const nines = allRatings.filter(r => r.rating === 9).slice(0, 12);
const recentlyRated = allRatings.slice(0, 10);
const topDirectorName = directors?.[0]?.[0] || "";
const directorSpotlight = allRatings.filter(m => m.director === topDirectorName && m.rating >= 9);
---
<div class="space-y-16">
  <section class="animate space-y-4">
    <div class="flex items-end justify-between border-b border-black/10 pb-2">
      <h2 class="text-xs font-mono uppercase tracking-[0.3em] text-orange-600 font-bold">10/10 Collection ({tens.length})</h2>
    </div>
    <div class="flex gap-4 overflow-x-auto pb-4 snap-x no-scrollbar">
      {tens.map((item) => (
        <div class="min-w-[150px] space-y-2 snap-start">
          <a href={item.href} target="_blank" class="block aspect-[2/3] rounded-lg overflow-hidden bg-neutral-900 transition-transform hover:scale-105">
            <img src={item.poster} alt={item.title} class="w-full h-full object-cover" />
          </a>
          <p class="text-[12px] font-bold uppercase truncate text-neutral-800 dark:text-neutral-200">{item.title}</p>
        </div>
      ))}
    </div>
  </section>
</div>
