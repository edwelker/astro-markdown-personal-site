---
const { schedule = [], scheduleLink } = Astro.props;

function formatGameDate(date) {
    return new Date(date).toLocaleString('en-US', {
        month: 'short',
        day: 'numeric',
        hour: 'numeric',
        minute: '2-digit'
    });
}
---

<div class="text-right">
    <div class="flex items-center justify-end mb-4 gap-2">
        <h3 class="font-bold text-base text-black dark:text-white">Next games</h3>
        {scheduleLink && (
            <a href={scheduleLink} target="_blank" rel="noopener noreferrer" class="text-neutral-400 hover:text-blue-500 transition-colors" title="View Full Schedule">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
            </a>
        )}
    </div>
    <ul class="space-y-4">
        {schedule.map(game => (
            <li>
                <div class="text-sm font-medium text-neutral-900 dark:text-neutral-100 flex items-center justify-end">
                    {game.text}
                    {game.opponentRecord && (
                        <a 
                            href={game.standingsLink} 
                            target="_blank" 
                            rel="noopener noreferrer" 
                            class="text-neutral-400 font-normal text-[10px] ml-1.5 hover:underline hover:text-blue-600 transition-colors"
                        >
                            ({game.opponentRecord})
                        </a>
                    )}
                </div>
                <div class="mt-1 text-xs text-neutral-500 font-mono">
                    {formatGameDate(game.date)}
                    {game.tv && <span class="text-neutral-400"> â€¢ {game.tv}</span>}
                </div>
            </li>
        ))}
        {schedule.length === 0 && (
            <li class="text-sm text-neutral-500 italic">No upcoming games found.</li>
        )}
    </ul>
</div>
