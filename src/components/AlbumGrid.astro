---
interface Props {
  items: any[];
  limit: number;
}

const { items = [], limit } = Astro.props;
---

<div class="space-y-4">
  <h3 class="mb-3 text-sm font-bold tracking-wider text-neutral-500 uppercase">Top Albums</h3>

  <div class="grid grid-cols-2 gap-x-4 gap-y-10 sm:grid-cols-5">
    {
      items.slice(0, limit).map((album: any, i: number) => (
        <a
          href={album.url}
          target="_blank"
          class={`group relative block space-y-3 no-underline ${i === 0 ? 'col-span-2 row-span-1 sm:row-span-2' : ''}`}
          title={`${album.name} by ${album.artist}`}
        >
          <div class="relative aspect-square overflow-hidden rounded-md border border-neutral-200 bg-neutral-50 shadow-sm dark:border-neutral-800 dark:bg-neutral-900">
            {album.image ? (
              <img
                src={album.image}
                alt={album.name}
                class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
                loading="lazy"
              />
            ) : (
              <div class="flex h-full w-full items-center justify-center p-2 text-center">
                <div class="flex h-1/2 w-1/2 items-center justify-center rounded-full border-2 border-neutral-300 dark:border-neutral-600">
                  <div class="h-1/3 w-1/3 rounded-full bg-neutral-300 dark:bg-neutral-600" />
                </div>
              </div>
            )}
          </div>

          <div class="min-w-0 space-y-0.5 px-0.5">
            <div class="flex items-start justify-between gap-2">
              <div
                class={`${i === 0 ? 'text-sm font-bold' : 'text-xs font-semibold'} truncate text-black transition-colors group-hover:text-neutral-600 dark:text-white dark:group-hover:text-neutral-300`}
              >
                {album.name}
              </div>
              <span
                class={`${i === 0 ? 'text-xs' : 'text-[10px]'} shrink-0 font-mono text-neutral-400 tabular-nums`}
              >
                {album.plays}
              </span>
            </div>
            <div
              class={`${i === 0 ? 'text-xs' : 'text-[11px]'} truncate leading-tight text-neutral-500`}
            >
              {album.artist}
            </div>
          </div>
        </a>
      ))
    }
  </div>
</div>
