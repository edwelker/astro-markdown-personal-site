---
import Layout from '@layouts/Layout.astro';
import Container from '@components/Container.astro';
import BackToPrevious from '@components/BackToPrevious.astro';

const title = 'API Endpoints';
const description = 'Raw data feeds for photos, music, cycling, and media tracking.';

const lastUpdated = new Date().toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const endpoints = [
  { name: 'Flickr Photos', url: '/data/flickr-photos.json', type: 'JSON' },
  { name: 'Music Stats', url: '/data/music.json', type: 'JSON' },
  { name: 'Cycling Stats', url: '/data/cycling.json', type: 'JSON' },
  { name: 'Trakt Media', url: '/data/trakt.json', type: 'JSON' },
  { name: 'Highlights JSON', url: '/data/highlights.json', type: 'JSON' },
  { name: 'Highlights XML', url: '/highlights.xml', type: 'XML' },
  { name: 'Site RSS Feed', url: '/rss.xml', type: 'RSS' },
];
---

<Layout title={title} description={description}>
  <Container>
    <div class="animate">
      <div class="relative pt-12 pb-8">
        <BackToPrevious href="/" />
      </div>

      <header class="relative mb-12">
        <h1
          class="text-3xl leading-none font-black tracking-tighter text-black uppercase dark:text-white"
        >
          API Endpoints
        </h1>
        <div class="mt-4 max-w-lg space-y-4 text-sm leading-relaxed text-neutral-500">
          <p>
            Public data endpoints powering the various sections of this site. Last documented on <span
              class="font-mono font-bold text-black dark:text-white">{lastUpdated}</span
            >.
          </p>
          <p>
            This is a static site generated at build time. During the build process, custom scripts
            pull data from various third-party services (Strava, Flickr, Last.fm, Trakt) and format
            it on the server side before posting.
          </p>
        </div>
      </header>

      <section class="space-y-8">
        <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
          {
            endpoints.map((endpoint) => (
              <a
                href={endpoint.url}
                class="group block rounded-lg border border-black/10 p-4 transition-colors hover:border-black dark:border-white/10 dark:hover:border-white"
              >
                <div class="flex items-center justify-between">
                  <span class="text-sm font-bold tracking-tight text-neutral-800 uppercase dark:text-neutral-200">
                    {endpoint.name}
                  </span>
                  <span class="rounded bg-neutral-100 px-2 py-1 font-mono text-[10px] text-neutral-500 dark:bg-neutral-800">
                    {endpoint.type}
                  </span>
                </div>
                <p class="mt-2 truncate font-mono text-[11px] text-neutral-400">{endpoint.url}</p>
              </a>
            ))
          }
        </div>
      </section>

      <footer class="mt-20 border-t border-black/10 pt-24 pb-12 dark:border-white/10">
        <div
          class="flex items-center justify-between font-mono text-[10px] tracking-widest text-neutral-500 uppercase"
        >
          <span></span>
          <span></span>
        </div>
      </footer>
    </div>
  </Container>
</Layout>
