---
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import { getAllHighlights } from "@lib/highlights"; // Import the helper
import { SITE } from "@consts";

const highlights = await getAllHighlights();
---

<Layout title={`Highlights | ${SITE.TITLE}`} description="Curated photos and code.">
  <Container>
    <div class="space-y-4">
      <h1 class="font-semibold text-black dark:text-white text-xl mb-6">Highlights</h1>

      <div class="grid grid-cols-1 gap-4">
        {highlights.map((item) => (
          <div class="border border-black/15 dark:border-white/20 p-4 rounded-sm hover:bg-black/5 dark:hover:bg-white/5 transition-colors">
            <h3 class="font-semibold text-black dark:text-white">
                {/* The Link component handles the 'external' prop */}
                <Link
                  href={item.url}
                  external={item.url?.startsWith("http")}
                  aria-label={item.title}
                  class="font-medium"
                >
                  {item.title}
                </Link>
                {/* Arrow for external links */}
                {item.url?.startsWith("http") && <span class="text-xs text-gray-500">â†—</span>}
            </h3>
            <p class="text-sm text-black/60 dark:text-white/60 mt-1">
              {item.description}
            </p>
          </div>
        ))}
      </div>
    </div>
  </Container>
</Layout>
