---
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import { getAllHighlights } from "@lib/highlights"; // Import the helper
import { SITE } from "@consts";

const highlights = await getAllHighlights();
---

<Layout title={`Highlights | ${SITE.TITLE}`} description="Curated photos and code.">
  <Container>
    <div class="space-y-4">
      <h1 class="font-semibold text-black dark:text-white text-xl mb-6">Highlights</h1>

      <div class="grid grid-cols-1 gap-4">
        {highlights.map((item) => (
          <div class="border border-black/15 dark:border-white/20 p-4 rounded-sm hover:bg-black/5 dark:hover:bg-white/5 transition-colors">
            <h3 class="font-semibold text-black dark:text-white">
              <a
                href={item.url}
                // Line 21
                target={item.url?.startsWith("http") ? "_blank" : "_self"}

                // Line 22
                rel={item.url?.startsWith("http") ? "noopener noreferrer" : ""}
                class="hover:underline"
              >
                {item.title}
                {item.url?.startsWith("http") && <span class="text-xs ml-1 opacity-70">â†—</span>}
              </a>
            </h3>
            <p class="text-sm text-black/60 dark:text-white/60 mt-1">
              {item.description}
            </p>
          </div>
        ))}
      </div>
    </div>
  </Container>
</Layout>
